#### [3422. å·¦å­©å­å³å…„å¼Ÿ](https://www.acwing.com/problem/content/3425/): `è´ªå¿ƒ` `DFS` `é‚»æ¥è¡¨å­˜å‚¨`

> å·¦å­©å­å³å…„å¼Ÿé‡å»ºæ–¹å¼, å°±ç±»ä¼¼å›¾çš„`é‚»æ¥é“¾è¡¨å­˜å‚¨`
>
> åªå…³æ³¨ä¸€å±‚çš„è¯, å­èŠ‚ç‚¹æŒ‰ä¸åŒé¡ºåºæ’åˆ—, ä¼šç”Ÿæˆä¸åŒçš„é‡å»ºç»“æœ
>
> - `é€’å½’(DFS)`: æ¯ä¸€å±‚å­æ ‘è‡ªä¸‹å‘ä¸Šè®¡ç®—æœ€å¤§é‡å»ºåé«˜åº¦
> 
> - `è´ªå¿ƒ`: æ¯ä¸€å±‚ä¸­å°†æ‰€æœ‰å­èŠ‚ç‚¹é€’å½’å¾—åˆ°çš„`maxH`æ”¾åˆ°æœ€å¤–ä¾§, é¢å¤–åŠ `cnt`çš„é«˜åº¦, ç­”æ¡ˆå³ä¸º`maxH+cnt`
>
> ![Acwing-3422](/appendix/acwing-3422.png)
> 
> è½¬åŒ–åå¯èƒ½å½¢æˆçš„æœ€å¤§é«˜åº¦ ğŸŸ° æœ€æ·±å­æ ‘çš„é«˜åº¦ â• å­èŠ‚ç‚¹æ•°é‡

```CPP
#include <cstdio>
#include <iostream>
#include <cstring>
using namespace std;

const int N = 100010;
int h[N], e[N], nxt[N], idx=0;;
int n, p;

void insert(int a, int b){
    e[idx] = b;
    nxt[idx] = h[a];
    h[a] = idx++;
}
int DFS(int u){
    int maxH = 0;
    int cnt = 0;
    for(int i=h[u]; i!=-1; i=nxt[i]){
        int j = e[i];
        maxH = max(maxH, DFS(j));
        cnt++;
    }
    return maxH + cnt;
}
int main(){
    memset(h, -1, sizeof h);
    scanf("%d", &n);
    for(int i=2; i<=n; i++){   // æ’å…¥n-1æ¡è¾¹
        scanf("%d", &p);
        insert(p, i);
    }
    printf("%d\n", DFS(1));
}
```