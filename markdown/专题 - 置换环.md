#### ç½®æ¢ç¯ (ä½¿æ•°ç»„æœ‰åºéœ€è¦çš„æœ€å°ä¸¤ä¸¤äº¤æ¢æ¬¡æ•°)

> ç›¸å…³é¢˜ç›®: 
> - [LC2471. é€å±‚æ’åºäºŒå‰æ ‘æ‰€éœ€çš„æœ€å°‘æ“ä½œæ•°ç›®](/workspace/2471.%20%E9%80%90%E5%B1%82%E6%8E%92%E5%BA%8F%E4%BA%8C%E5%8F%89%E6%A0%91%E6%89%80%E9%9C%80%E7%9A%84%E6%9C%80%E5%B0%91%E6%93%8D%E4%BD%9C%E6%95%B0%E7%9B%AE.cpp)
>
> - [LC765. æƒ…ä¾£ç‰µæ‰‹](/workspace/765.%E6%83%85%E4%BE%A3%E7%89%B5%E6%89%8B.cpp)

##### é—®é¢˜æè¿°
> Given an array of N **distinct** elements, find the minimum number of swaps required to sort the array.
>
> ![ç½®æ¢ç¯](/appendix/%E7%BD%AE%E6%8D%A2%E7%8E%AF-1.png)
> 
> å› æ­¤, `ans = âˆ‘(cycle_size-1)`
>
> åŒæ—¶, æ¯ä¸ªèŠ‚ç‚¹å…ƒç´ åªå‡ºç°ä¸€ä¸ªç¯è·¯ä¸­, å…±æœ‰`N`ä¸ªå…ƒç´ , åˆ™`ans = N-(#cycle)`
> 
> ![ç½®æ¢ç¯-cn](/appendix/%E7%BD%AE%E6%8D%A2%E7%8E%AF.png)


##### æ–¹æ³•ä¸€: `map`è®°å½•æ­£ç¡®ä½ç½®

> é€‚åˆã€Œå°†æ•°ç»„äº¤æ¢è‡³ã€æœ‰åºè¿™æ ·çš„é—®é¢˜, æ¯”å¦‚[LC2471. é€å±‚æ’åºäºŒå‰æ ‘æ‰€éœ€çš„æœ€å°‘æ“ä½œæ•°ç›®](/workspace/2471.%20%E9%80%90%E5%B1%82%E6%8E%92%E5%BA%8F%E4%BA%8C%E5%8F%89%E6%A0%91%E6%89%80%E9%9C%80%E7%9A%84%E6%9C%80%E5%B0%91%E6%93%8D%E4%BD%9C%E6%95%B0%E7%9B%AE.cpp)
> 
> å·²çŸ¥æœ€å°äº¤æ¢æ¬¡æ•°`ans = N-#cycle`, **æ€ä¹ˆæ‰¾åˆ°ç¯?**
> 
> ä»ç¬¬ä¸€ä¸ªæ•°å‡ºå‘, æŠŠè¿™ä¸ªæ•°å­—å½“æˆä¸‹æ ‡å»è®¿é—®æ•°ç»„, ä¸æ–­å¾ªç¯ç›´åˆ°å›åˆ°è¿™ä¸ªæ•°æœ¬èº« (`visited[j]=true`)
>
> è¿‡ç¨‹éœ€è¦ä¸€ä¸ª`vector<bool> visited`ååŠ©æ ‡è®°å·²ç»è®¿é—®è¿‡çš„å…ƒç´ , æ‰èƒ½**ä¸é‡å¤åœ°ç»Ÿè®¡ç¯çš„æ•°é‡**, å¹¶ä¸”æ­£ç¡®æ‰¾åˆ°ç¯çš„ç»ˆæ­¢ä½ç½®

```CPP
int minSwap(vector<int> arr){
    int n = arr.size();
    // æ±‚æ¯ä¸ªå…ƒç´ çš„ç›®æ ‡ä½ç½®
    // å¯¹copyæ’åº, ç„¶åç”¨mapè®°å½•æ­£ç¡®ä½ç½®(copyä¸­çš„ä¸‹æ ‡)
    vector<int> copy = arr;
    sort(copy.begin(), copy.end());
    unordered_map<int, int> mp;
    for (int i=0; i<n; i++){
        mp[copy[i]] = i;
    }
    // æ‰¾åˆ°æ‰€æœ‰ç¯è·¯
    vector<bool> visited(n, false);
    int loopNum = 0;
    for(int i=0; i<n; i++){
        if(!visited[i]){
            // éå†ä¸€ä¸ªç¯, æ ‡è®°æ‰€æœ‰èŠ‚ç‚¹ä¸ºvisited=true
            int j = i;
            while(!visited[j]){     // !!!
                visited[j] = true;
                j = mp[arr[j]];
            }
            loopNum++;
        }
    }
    return n - loopNum;
}
```

##### æ–¹æ³•äºŒ: å¹¶æŸ¥é›†

> é€‚åˆä»»æ„ç½®æ¢ç¯é—®é¢˜, å¦‚æœä¸æ¢å¤è‡³æœ‰åº, å¯èƒ½ä¸å®¹æ˜“æ‰¾åˆ°ç›®æ ‡ä½ç½® (æ–¹æ³•ä¸€ä¸­`map`å­˜å‚¨çš„å†…å®¹), æ¯”å¦‚[LC765. æƒ…ä¾£ç‰µæ‰‹](/workspace/765.%E6%83%85%E4%BE%A3%E7%89%B5%E6%89%8B.cpp)
>
> ä»¥ä¸‰å¯¹æƒ…ä¾£ğŸ‘«æ„æˆçš„ç½®æ¢ç¯ä¸ºä¾‹, æŠŠåé”™äº†ä½ç½®ã€é€»è¾‘ä¸Šè¿åœ¨ä¸€èµ·çš„æƒ…ä¾£äº¤æ¢æˆèƒ½å¤Ÿå½¼æ­¤ç‰µæ‰‹çš„æœ€å°‘æ¬¡æ•° = æƒ…ä¾£å¯¹æ•° - 1 (ä¸€ä¸ªç¯ä¸­)
> 
> ![LC765-1](/appendix/LC765-1.png)
> 
> å‡è®¾å¯ä»¥`N`å¯¹æƒ…ä¾£ğŸ‘«, åˆ†æˆäº†`n`ä¸ªç»„(ç½®æ¢ç¯), æ¯ä¸ªç»„å†…çš„æœ€å°‘äº¤æ¢æ¬¡æ•°ä¸º`Ni-1`
> 
> ![LC765-2](/appendix/LC765-2.png)
>
> æ•´ä¸ªåºåˆ—çš„æ€»äº¤æ¢æ¬¡æ•°ä¹Ÿå°±æ˜¯æ‰€æœ‰ç¯çš„æœ€å°‘äº¤æ¢æ¬¡æ•°ä¹‹å’Œ â¡ï¸ `ans = (N1-1)+(N2-1)+Â·Â·Â·+(Nn-1) = N - n`
>
> åˆå¹¶æ¡ä»¶: 
> - ~~æ ¹æ®ç¼–å·(è½¬æ¢æˆç»„å·)~~: ä¸€å¯¹ç¼–å·ä¸º`<2*i, 2*i+1>`çš„æƒ…ä¾£ğŸ‘«éœ€è¦åœ¨ä¸€ç»„, å› æ­¤ç›´æ¥æŠŠæ¯ä¸ªäººçš„ç¼–å·é™¤ä»¥`2` â¡ï¸ è‡ªç„¶æœ‰`(2*1)/2 = (2*i+1)/2`, ä½¿ç”¨è¿™æ ·çš„ç¼–å·, ä¹Ÿå°±ä¸éœ€è¦å¤„ç†ä¸€å¯¹æƒ…ä¾£ğŸ‘«ä¹‹é—´çš„åˆå¹¶äº†
> - æ ¹æ®ä½ç½®: å°†ä¸¤ä¸ªç›¸é‚»åº§ä½(å¿…é¡»æ˜¯`<å¶æ•°ä½ç½®, å¥‡æ•°ä½ç½®>`è¿™æ ·çš„ç›¸é‚»åº§ä½) è¿›è¡Œå¹¶æŸ¥é›†åˆå¹¶
> 
> `ans`å¯ä»¥ç”¨å¹¶æŸ¥é›†çš„ä¸¤ä¸ªä¿¡æ¯æ±‚è§£:
> - `sizeList[N]`æ±‚`ans = (N1-1) + (N2-1) + Â·Â·Â· + (Nn-1)`
> - æˆ–è€…ç”¨èŠ‚ç‚¹æ•°`N` â– é›†åˆæ•°`n` (å³`loopnum`), å°±ä¸éœ€è¦é¢å¤–ç»´æŠ¤`sizeList`äº†

```CPP
vector<int> father;
void init(int n){
    father.resize(n);
    for(int i=0; i<n; i++){
        father[i] = i;
    }
}
int find(int u){
    if(father[u] != u)
        father[u] = find(father[u]);
    return father[u];
}
void union2(int u, int v){
    int fu = find(u);
    int fv = find(v);
    father[fu] = fv;
}
int minSwapsCouples(vector<int>& row) {
    int n = row.size();
    init(n);
    // åˆå¹¶ç›¸é‚»çš„ä¸€å¯¹åº§ä½
    for(int i=0; i<n; i+=2){
        union2(row[i]/2, row[i+1]/2);   // ç”¨"ç»„å·"åˆå¹¶
    }
    // ans=n-loopNum, æˆ–è€…ç»´æŠ¤ä¸€ä¸ªsizeList[], ans=sum(sizeList[u]-1)
    int loopNum = 0;
    for(int u=0; u<n; u++){
        if(father[u]==u)
            loopNum++;
    }
    return n-loopNum;
}
```