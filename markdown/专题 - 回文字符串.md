### å›æ–‡å­—ç¬¦ä¸²

#### 0. æ‰¾è§„å¾‹ / æ¨¡æ‹Ÿ

##### [680. éªŒè¯å›æ–‡ä¸²II](/workspace/680.%E9%AA%8C%E8%AF%81%E5%9B%9E%E6%96%87%E4%B8%B2-ii.cpp)

> é¢˜ç›®é“¾æ¥: https://leetcode.cn/problems/valid-palindrome-ii/
> 
> åœ¨ã€ŒéªŒè¯å›æ–‡å­—ç¬¦ä¸²ã€çš„è¿‡ç¨‹ä¸­, ä¸€æ—¦é‡åˆ°ä¸€å¯¹ä¸ç›¸ç­‰çš„å­—ç¬¦`s[i] != s[n-i-1]`, åˆ™å¯ä»¥æ´¾ç”Ÿå‡ºä¸¤ä¸ªå­—ç¬¦ä¸², åˆ†åˆ«ä¸åŒ…å«`s[i]`å’Œ`s[n-i-i]`, å¯¹è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ ‡å‡†çš„å›æ–‡å­—ç¬¦ä¸²éªŒè¯å³å¯
>
> âš ï¸ æ³¨æ„ã€Œå­—ç¬¦ä¸²`s`æœ¬èº«å°±æ˜¯å›æ–‡ä¸²ã€çš„æƒ…å†µ

##### [409. æœ€é•¿å›æ–‡ä¸²](https://leetcode.cn/problems/longest-palindrome/): `æ‰¾è§„å¾‹`

> æ¯ä¸ªå­—æ¯åªèƒ½ä¿å­˜æœ€å¤š`cnt / 2 * 2`ä¸ª(æ•°é‡ä¸ºå¶æ•°), æœ€ä¸­å¿ƒå¯ä»¥éšä¾¿åŠ ä¸€ä¸ªè¢«å»æ‰çš„(å¦‚æœæœ‰å‡ºç°æ¬¡æ•°ä¸ºå¥‡æ•°çš„å­—ç¬¦)

<br/>

#### 1. é¢„å¤„ç†æ‰€æœ‰å›æ–‡å­ä¸² - `äºŒç»´dp`

> å¦‚æœæ£€æŸ¥æ•´ä¸ªå­—ç¬¦ä¸², å¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ª`0~n/2`çš„`for`å¾ªç¯è¿›è¡Œé€ä½ç½®æ£€æŸ¥; ä½†å¯¹äºè¦æ£€æŸ¥æ‰€æœ‰**å›æ–‡å­ä¸²**çš„é¢˜ç›®, åº”è¯¥ç”¨`äºŒç»´dp`
>
> ä¸ç®¡æ˜¯[LC5. æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦](https://leetcode.cn/problems/longest-palindromic-substring/), è¿˜æ˜¯è®¡æ•°[LC647. å›æ–‡å­ä¸²](https://leetcode.cn/problems/palindromic-substrings/), æœ¬è´¨éƒ½æ˜¯åˆ¤æ–­æ‰€æœ‰å­ä¸²`(i, j)`æ˜¯å¦ä¸ºå›æ–‡, éƒ½å¯ä»¥ç”¨`äºŒç»´dp`
> 
> ![æœ€é•¿å›æ–‡å­ä¸²](/appendix/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2.png)

##### [LC5. æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦](https://leetcode.cn/problems/longest-palindromic-substring/)

##### [LC647. å›æ–‡å­ä¸²](https://leetcode.cn/problems/palindromic-substrings/)
```CPP
// äºŒç»´dpé¢„å¤„ç†å‡ºæ‰€æœ‰å­ä¸²æ˜¯å¦ä¸ºå›æ–‡
vector<vector<bool>> initSubstr(string s){
    int n = s.size();
    vector<vector<bool>> dp(n, vector<bool>(n, false));
    for(int i=0; i<n; i++){
        dp[i][i] = true;
        if(i != n-1)
            dp[i][i+1] = (s[i]==s[i+1]);
    }
    for(int len=3; len<=n; len++){
        for(int i=0; i+len-1<n; i++){
            int j = i+len-1;
            if(s[i]==s[j])
                dp[i][j] = dp[i+1][j-1];
        }
    }
    return dp;
}
```


##### [LC516. æœ€é•¿å›æ–‡å­åºåˆ—](/workspace/516.%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97.cpp)
> `dp[i][j]`è¡¨ç¤ºå­—ç¬¦ä¸²`s[i:j]`ä¸­, åˆ é™¤æŸäº›æˆ–ä¸åˆ é™¤å­—ç¬¦èƒ½å¾—åˆ°çš„æœ€å¤§åºåˆ—é•¿åº¦, çŠ¶æ€è½¬ç§»æ–¹å¼ä¸`äºŒç»´dp`çš„æ¨¡æ¿ç±»ä¼¼
>
> - å¦‚æœ`s[i]==s[j]`, åˆ™`dp[i][j] = dp[i+1][j-1] + 2`
> - å¦‚æœ`s[i]!=s[j]`, åˆ™`dp[i][j] = max(dp[i+1][j], dp[i][j-1])`
>
> å¦ä¸€ä¸ªæ€è·¯: "å°†å­—ç¬¦ä¸²ç¿»è½¬, ç„¶åæ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—å°±å¯ä»¥äº†"

```CPP
int longestPalindromeSubseq(string s) {
    int n = s.size();
    // dp[i][j]: å­—ç¬¦ä¸²s[i:j]ä¸­, åˆ é™¤æŸäº›æˆ–ä¸åˆ é™¤å­—ç¬¦å½¢æˆçš„æœ€å¤§åºåˆ—é•¿åº¦
    int dp[n][n];
    memset(dp, 0, sizeof dp);
    for(int i=0; i<n; i++){
        dp[i][i] = 1;
        if(i != n-1){
            if(s[i]==s[i+1]){
                dp[i][i+1] = 2;
            }
            else
                dp[i][i+1] = 1;
        }
    }
    for(int len=3; len<=n; len++){
        for(int i=0; i+len-1<n; i++){
            int j = i+len-1;
            if(s[i]==s[j])
                dp[i][j] = dp[i+1][j-1] + 2;
            else
                dp[i][j] = max(dp[i+1][j], dp[i][j-1]);
        }
    }
    return dp[0][n-1];
}
```
https://leetcode.cn/problems/longest-palindromic-subsequence/

<br/>

#### 2. åˆ†å‰²å›æ–‡ä¸²
> ä¸€èˆ¬éœ€è¦å…ˆç”¨[ä¸Šé¢çš„æ–¹å¼ğŸ‘†](/markdown/%E4%B8%93%E9%A2%98%20-%20%E5%9B%9E%E6%96%87%E5%AD%97%E7%AC%A6%E4%B8%B2.md)é¢„å¤„ç†å‡ºæ‰€æœ‰å­ä¸²æ˜¯å¦ä¸ºå›æ–‡å­—ç¬¦ä¸²
>
> ç„¶åå†é…åˆå¦ä¸€ä¸ª`dp`æˆ–è€…`å›æº¯`æ¥è§£å†³

##### [LC131. åˆ†å‰²å›æ–‡ä¸²](/workspace/131.%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2.cpp) - æ–¹æ¡ˆæ•°: `å›æº¯` â• `äºŒç»´dpé¢„å¤„ç†`
> å­—ç¬¦ä¸²é•¿åº¦éå¸¸å°(`1<=s.length<=16`), å¯ä»¥ç›´æ¥ç”¨`isHuiWen()`åˆ¤æ–­, ä¹Ÿå¯ä»¥ç”¨`äºŒç»´dp`é¢„å¤„ç†æ‰€æœ‰å­ä¸², ç”¨äºå›æº¯ä¸­çš„åˆ¤æ–­æ¡ä»¶
> 
> åˆ†å‰²æ–¹æ¡ˆç”¨`å›æº¯æ³•`è·å¾—

```CPP
// äºŒç»´dpé¢„å¤„ç†å‡ºæ‰€æœ‰å­ä¸²æ˜¯å¦ä¸ºå›æ–‡
vector<vector<bool> > _dp;
vector<vector<bool>> initSubstr(string s){
    int n = s.size();
    vector<vector<bool>> dp(n, vector<bool>(n, false));
    for(int i=0; i<n; i++){
        dp[i][i] = true;
        if(i != n-1)
            dp[i][i+1] = (s[i]==s[i+1]);
    }
    for(int len=3; len<=n; len++){
        for(int i=0; i+len-1<n; i++){
            int j = i+len-1;
            if(s[i]==s[j])
                dp[i][j] = dp[i+1][j-1];
        }
    }
    return dp;
}
// å›æº¯
vector<vector<string>> ans;
vector<string> path;
void backtrack(string s, int cur){
    if(cur == s.size()){
        ans.push_back(path);
        return ;
    }
    for(int i=cur; i<s.size(); i++){
        string sub = s.substr(cur, i-cur+1);
        // è™½ç„¶å­—ç¬¦ä¸²é•¿åº¦ä¸è¶…è¿‡16, ä½†è¿˜æ˜¯äºŒç»´dpé¢„å¤„ç†ä¸€ä¸‹æ¯”è¾ƒå¥½
        if(_dp[cur][i]==true){
            path.push_back(sub);
            backtrack(s, i+1);
            path.pop_back();
        }
    }
}
vector<vector<string>> partition(string s) {
    _dp = initSubstr(s);
    backtrack(s, 0);
    return ans;
}
```


##### [132. åˆ†å‰²å­—ç¬¦ä¸²II](/workspace/132.%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2-ii.cpp) - : `dp` â• `äºŒç»´dpé¢„å¤„ç†`

```CPP
// äºŒç»´dpé¢„å¤„ç†å‡ºæ‰€æœ‰å­ä¸²æ˜¯å¦ä¸ºå›æ–‡
vector<vector<bool>> initSubstr(string s){
    int n = s.size();
    vector<vector<bool>> dp(n, vector<bool>(n, false));
    for(int i=0; i<n; i++){
        dp[i][i] = true;
        if(i != n-1)
            dp[i][i+1] = (s[i]==s[i+1]);
    }
    for(int len=3; len<=n; len++){
        for(int i=0; i+len-1<n; i++){
            int j = i+len-1;
            if(s[i]==s[j])
                dp[i][j] = dp[i+1][j-1];
        }
    }
    return dp;
}
// å†æ¥ä¸€ä¸ªdp, ç»´æŠ¤ã€Œæœ€å°‘åˆ†å‰²æ¬¡æ•°ã€
int minCut(string s) {
    int n = s.size();
    vector<vector<bool>> huiwen_dp = initSubstr(s);
    vector<int> dp(n, INT_MAX);
    dp[0] = 0;
    for(int i=1; i<n; i++){
        // å¦‚æœ[0:i]æ˜¯å›æ–‡, ä¸éœ€è¦åˆ†å‰²
        if(huiwen_dp[0][i]==true){
            dp[i] = 0;
        }
        // å¦åˆ™æœ€å¤šåˆ†å‰²iæ¬¡, æšä¸¾æ¯ä¸ªä½¿[j:i]æ˜¯å›æ–‡çš„åˆ†ç•Œç‚¹, æ‰¾åˆ°æœ€å°çš„dp[i]
        else{
            dp[i] = i;
            for(int j=0; j<i; j++){
                if(huiwen_dp[j+1][i]==true)
                    dp[i] = min(dp[i], dp[j] + 1);
            }
        }
    }
    return dp[n-1];
}
```
https://leetcode.cn/problems/palindrome-partitioning-ii/


##### [1278. åˆ†å‰²å­—ç¬¦ä¸²III](/workspace/1278.%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2-iii.cpp): `äºŒç»´dp` â• `äºŒç»´dpé¢„å¤„ç†`

> [å®˜æ–¹é¢˜è§£](https://leetcode.cn/problems/palindrome-partitioning-iii/solution/fen-ge-hui-wen-chuan-iii-by-leetcode-solution/)

```CPP
// huiwen_dp[i][j]: å°†s[i:j]å˜ä¸ºå›æ–‡å­—ç¬¦ä¸²çš„å¼€é”€
vector<vector<int>> huiwen_dp;
vector<vector<int>> initSubstr(string s){
    int n = s.size();
    vector<vector<int>> dp(n, vector<int>(n, n));
    for(int i=0; i<n; i++){
        dp[i][i] = 0;
        if(i != n-1)
            dp[i][i+1] = (s[i] != s[i+1]);
    }
    for(int len=3; len<=n; len++){
        for(int i=0; i+len-1<n; i++){
            int j = i+len-1;
            if(s[i]==s[j])
                dp[i][j] = dp[i+1][j-1];
            else
                dp[i][j] = dp[i+1][j-1] + 1;
        }
    }
    return dp;
}
int palindromePartition(string s, int K) {
    huiwen_dp = initSubstr(s);
    int n = s.size();
    // dp[i][k]: s[:i]åˆ†å‰²æˆkä»½éœ€è¦çš„æœ€å°‘ä¿®æ”¹æ•°
    vector<vector<int>> dp(n, vector<int>(K+1, INT_MAX));
    for(int i=0; i<n; i++){
        for(int k=1; k<=min(i+1, K); k++){
            if(k==1)
                dp[i][1] = huiwen_dp[0][i];
            else{
                // ä¸Šä¸€ç»„çš„ç»“æŸä½ç½®
                for(int j=k-2; j<i; j++){
                    dp[i][k] = min(dp[i][k], dp[j][k-1] + huiwen_dp[j+1][i]);
                }
            }
        }
    }
    return dp[n-1][K];
}
```
https://leetcode.cn/problems/palindrome-partitioning-iii/


##### [2472. ä¸é‡å å›æ–‡å­å­—ç¬¦ä¸²çš„æœ€å¤§æ•°ç›®](/workspace/2472.%20%E4%B8%8D%E9%87%8D%E5%8F%A0%E5%9B%9E%E6%96%87%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E7%9B%AE.md)
> [Weekly 319](/record/2022/Weekly%20319.md)çš„ç¬¬å››é¢˜, åŒæ ·å…ˆä½¿ç”¨`äºŒç»´dp`é¢„å¤„ç†å‡ºæ‰€æœ‰å­ä¸²æ˜¯å¦ä¸ºå›æ–‡ä¸² (ä¸‹æ ‡é”™å¼€ä¸€ä½, ä»1å¼€å§‹, æ–¹ä¾¿ç¬¬äºŒä¸ªdpä½¿ç”¨)
> 
> ç„¶åå†å®šä¹‰ä¸€ä¸ª`äºŒç»´dp`, `dp[i]`è¡¨ç¤º`s[0:i-1]`èƒ½å¤Ÿåˆ†å‰²å‡ºçš„é•¿åº¦å¤§äºç­‰äº`k`çš„å›æ–‡å­ä¸²çš„æœ€å¤§æ•°ç›®
>
> æ³¨æ„`dp[i]`åº”è¯¥åˆå§‹åŒ–ä¸º`dp[i-1]`
> 
> çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º`dp[i][k] = max(dp[i], dp[j]+1)`, jåº”è¯¥æ»¡è¶³`jâˆˆ[0, i-k]`ä»¥åŠ`isHW[j+1][i] = true`

```CPP
// äºŒç»´dpé¢„å¤„ç†å‡ºæ‰€æœ‰å­ä¸²æ˜¯å¦ä¸ºå›æ–‡, ä¸ºäº†æ–¹ä¾¿ä»1å¼€å§‹
vector<vector<bool>> initSubstr(string s){
    int n = s.size();
    vector<vector<bool>> dp(n+1, vector<bool>(n+1, false));
    for(int i=1; i<=n; i++){
        dp[i][i] = true;
        if(i != n)
            dp[i][i+1] = (s[i-1]==s[i]);
    }
    for(int len=3; len<=n; len++){
        for(int i=1; i+len-1<=n; i++){
            int j = i+len-1;
            if(s[i-1]==s[j-1])
                dp[i][j] = dp[i+1][j-1];
        }
    }
    return dp;
}
int maxPalindromes(string s, int k) {
    int n = s.size();
    vector<vector<bool> > isHW = initSubstr(s);
    vector<int> dp(n+1, 0);
    for(int i=k; i<=n; i++){
        dp[i] = dp[i-1];        // !!!
        for(int j=0; i-j>=k; j++){
            if(isHW[j+1][i]==true)
                dp[i] = max(dp[i], dp[j] + 1);
        }
    }
    return dp[n];
}
```