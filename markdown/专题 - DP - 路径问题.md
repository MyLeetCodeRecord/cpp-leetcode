#### è·¯å¾„é—®é¢˜

> [å®«æ°´ä¸‰å¶-è·¯å¾„ä¸“é¢˜](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247485037&idx=1&sn=d6d52c48600e655161e84f25d3402514&chksm=fd9cad72caeb2464e1d8adcd991ec178001472a6c6ddc02a1764bc74ea27a97f71fddbce9975&scene=178&cur_album_id=1773144264147812354#rd)
> 
> [å®«æ°´ä¸‰å¶-è·¯å¾„é—®é¢˜æ€»ç»“](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247485580&idx=1&sn=84c99a0a8ab7b543c3678db577309b97&chksm=fd9ca393caeb2a859fafb0cb12683669ed1a0086cb22e1eaaa9ec323e033ab2cf3a77dfc5561&cur_album_id=1773144264147812354&scene=189#wechat_redirect)
>
> å¤§ç¥ç«Ÿç„¶ä¹Ÿåœ¨mså…»è€, æ‰€ä»¥ä¸‰å¶å¤§ç¥aliasæ˜¯ä»€ä¹ˆå‘¢ ğŸ¤ª

![è·¯å¾„é—®é¢˜](/appendix/LC62.png)


#### ç¬¬ä¸€ç±»: è·¯å¾„æ•°é‡

##### [LC62. ä¸åŒè·¯å¾„](/workspace/62.%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84.cpp)
> é¢˜ç›®æè¿°: https://leetcode.cn/problems/unique-paths
> 
> åˆå§‹åŒ–`row 0`å’Œ`col 0`, ç„¶åè¿›è¡ŒçŠ¶æ€è½¬ç§»


##### [LC63. ä¸åŒè·¯å¾„â…¡](/workspace/63.%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84-ii.cpp)
> é¢˜ç›®æè¿°: https://leetcode.cn/problems/unique-paths-ii
> 
> æ³¨æ„å¯¹ç¬¬0è¡Œå’Œç¬¬0åˆ—çš„åˆå§‹åŒ–, å¯èƒ½æ— æ³•é€šè¿‡

##### [LC6203. çŸ©é˜µä¸­å’Œèƒ½è¢« K æ•´é™¤çš„è·¯å¾„](/record/Oct-Weekly-2.md): `è·¯å¾„å’Œ`å’Œ`è·¯å¾„æ•°ç›®`éƒ½æœ‰
> [å‘¨èµ›ç¬¬å››é¢˜](/record/Oct-Weekly-2.md)
> 
> é¦–å…ˆè¦ç”¨dp, è·¯å¾„æ¡æ•°å¯ä»¥ç”¨äºŒç»´`dp[i][j]`è¡¨ç¤ºåˆ°`(i,j)`çš„è·¯å¾„æ¡æ•°
> 
> é¢˜ç›®å¤šåŠ äº†ä¸€å±‚é™åˆ¶ - è·¯å¾„é•¿åº¦èƒ½æ•´é™¤ k => dpå¤šåŠ ä¸€ç»´è¡¨ç¤ºè·¯å¾„é•¿åº¦å¯¹kçš„ä½™æ•°(0ï½k-1),  å³`dp[m][n][k]`

---

#### ç¬¬äºŒç±»: è·¯å¾„å’Œ

##### [LC64. æœ€å°è·¯å¾„å’Œ](/workspace/64.%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E5%92%8C.cpp)
> é¢˜ç›®æè¿°: https://leetcode.cn/problems/minimum-path-sum
> 
> â¡ï¸ æ±‚æœ€å°è·¯å¾„
> 
> ![LC64](/appendix/LC64.png)


##### [LC120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ](/workspace/120.%E4%B8%89%E8%A7%92%E5%BD%A2%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E5%92%8C.cpp)
> é¢˜ç›®æè¿°:https://leetcode.cn/problems/triangle/
> 
> â¡ï¸ äºŒç»´dpå®ç°
> 
> ![LC120-1](/appendix/LC120-1.png)
> 
> â¡ï¸ ç©ºé—´ä¼˜åŒ– (åªä¼˜åŒ–äº†å­˜å‚¨, è®¡ç®—é‡ä¸Šæ²¡æœ‰åŒºåˆ«)
> 
> ![LC120-2](/appendix/LC120-2.png)


##### [LC931. ä¸‹é™è·¯å¾„æœ€å°å’Œ](/workspace/931.%E4%B8%8B%E9%99%8D%E8%B7%AF%E5%BE%84%E6%9C%80%E5%B0%8F%E5%92%8C.cpp)
> é¢˜ç›®æè¿°: https://leetcode.cn/problems/minimum-falling-path-sum/
> 
> ä¸[LC120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ](/workspace/120.%E4%B8%89%E8%A7%92%E5%BD%A2%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E5%92%8C.cpp)ç±»ä¼¼, ä¸åŒç‚¹åœ¨äºå½¢çŠ¶ä¸ºçŸ©é˜µ, ä¸”çŠ¶æ€è½¬ç§»æ—¶æœ‰ä¸‰ä¸ªå€™é€‰
> 
> ä¸ºäº†è®©`matrix`å’Œ`dp`æœ‰ç›´æ¥å¯¹åº”å…³ç³», å¯ä»¥å…ˆå°†`matrix`ä¸Šä¸‹ç¿»è½¬
> 
> ```CPP
> reverse(matrix.begin(), matrix.end());
> ```


##### [1289. ä¸‹é™è·¯å¾„æœ€å°å’Œâ…¡](/workspace/1289.%E4%B8%8B%E9%99%8D%E8%B7%AF%E5%BE%84%E6%9C%80%E5%B0%8F%E5%92%8C-ii.cpp)
> é¢˜ç›®æè¿°: https://leetcode.cn/problems/minimum-falling-path-sum-ii/
> 
> â¡ï¸[ç›´æ¥DP]((/workspace/1289.%E4%B8%8B%E9%99%8D%E8%B7%AF%E5%BE%84%E6%9C%80%E5%B0%8F%E5%92%8C-ii.cpp))
> 
> ä¸å‰ä¸¤é¢˜ç±»ä¼¼, ä½†è¿™é‡ŒçŠ¶æ€è½¬ç§»æ¥è‡ªä¸Šä¸€è¡Œä»»æ„ä¸‹æ ‡ä¸åŒçš„`dp[i-1][p]`, å³å¤æ‚åº¦`O(n^3)`
> 
> â¡ï¸[ç©ºé—´ä¼˜åŒ–](/workspace/1289.ä¸‹é™è·¯å¾„æœ€å°å’Œ-ii-improve.cpp)
> 
> - ç¬¬ä¸€å±‚ä¼˜åŒ–åœ¨äºç”¨`ä¸€ç»´`ä»£æ›¿`äºŒç»´`, å› ä¸ºæ¯å±‚åªä¸ä¸Šå±‚æœ‰å…³
> 
> - ç¬¬äºŒå±‚ä¼˜åŒ–åœ¨äºåªéœ€è¦ä¿å­˜`æœ€å°å€¼`å’Œ`æ¬¡å°å€¼`, å› ä¸ºä¸¤è€…èƒ½äº’ç›¸é¿å…`ä¸‹æ ‡é‡å `
> 
> ä½†è¿™ä¸‹æ ‡æœ‰ç‚¹éš¾æƒ³é€š...
> 
> ![LC1289](/appendix/LC1289.png)
> 
> ğŸ†š è¿è¡Œæ—¶é—´å¯¹æ¯”
> 
> ![LC1289-improve](/appendix/LC1289-2.png)

```CPP
// ç©ºé—´ä¼˜åŒ– => æœ‰é™å˜é‡æ¥ä»£æ›¿éå†æŸ¥æ‰¾
int minFallingPathSum(vector<vector<int>>& grid) {
    int n = grid.size();
    // æœ‰é™å˜é‡æ›¿ä»£äºŒç»´dpæ•°ç»„, éœ€è¦ä¸¤ä¸ªsum, ä»¥åŠæœ€å°å€¼åˆ—å·
    int first_sum = 0;
    int first_pos = -1;
    int second_sum = 0;
    for(int i=0; i<n; i++){
        int layer_first_sum = INT_MAX;
        int layer_first_pos = -1;
        int layer_second_sum = INT_MAX;
        for(int j=0; j<n; j++){
            // ä»…å½“j==firstPosæ—¶ä½¿ç”¨secondSum
            int curPathSum = ((j!=first_pos) ? first_sum : second_sum) + grid[i][j];
            // é‡åˆ°æœ€å° => æ›´æ–°æœ€å°å’Œæ¬¡å°
            if(curPathSum < layer_first_sum){
                layer_second_sum = layer_first_sum;
                layer_first_sum = curPathSum;
                layer_first_pos = j;
            }
            // é‡åˆ°æ¬¡å° => æ›´æ–°æ¬¡å°
            else if(curPathSum < layer_second_sum){
                layer_second_sum = curPathSum;
            }
        }
        first_sum = layer_first_sum;
        first_pos = layer_first_pos;
        second_sum = layer_second_sum;
    }
    return first_sum;
}
```

![å°ç»“](/appendix/è·¯å¾„é—®é¢˜.png)



---
#### å…¶å®ƒ

ä¸‹é¢è¿™å‡ é“é¢˜æ³¨æ„å…³æ³¨é‚£äº›**å˜åŒ–ç»´åº¦**, ä½œä¸º`dp`çš„ç»´åº¦(æ¯”å¦‚`start`, `maxMove`), ä¸å˜çš„å‚æ•°(æ¯”å¦‚ç»ˆç‚¹)ä¸ä½œä¸ºdpç»´åº¦ã€‚

##### [ğŸ“ŒLC1575. ç»Ÿè®¡æ‰€æœ‰å¯è¡Œè·¯å¾„](/workspace/1575.%E7%BB%9F%E8%AE%A1%E6%89%80%E6%9C%89%E5%8F%AF%E8%A1%8C%E8%B7%AF%E5%BE%84.cpp)

> é¢˜ç›®æè¿°: https://leetcode.cn/problems/count-all-possible-routes
> 
> ![LC1575](/appendix/LC1575.png)

```CPP
int mod = 1000000007;
// 4ä¸ªparams, åªæœ‰start, fuelæ˜¯å˜åŒ–çš„, æ‰€ä»¥ç”¨äºŒç»´dpæ¥è¡¨ç¤ºè¿™ä¸¤ä¸ªå¯å˜å‚æ•°
int countRoutes(vector<int>& locations, int start, int finish, int fuel) {
    int n = locations.size();

    // f[i][j]: ä»ä½ç½® i å‡ºå‘, å½“å‰æ²¹é‡ä¸º j æ—¶, åˆ°è¾¾ç›®çš„åœ°çš„è·¯å¾„æ•°
    vector<vector<int> > dp(n, vector<int>(fuel+1, 0));
    
    // å¯¹äºæœ¬èº«ä½ç½®å°±åœ¨ç›®çš„åœ°çš„çŠ¶æ€, è·¯å¾„æ•°ä¸º 1
    for (int i = 0; i <= fuel; i++)
        dp[finish][i] = 1;

    // ä»çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¯ä»¥å‘ç° f[i][fuel]=f[i][fuel]+f[k][fuel-need]
    // åœ¨è®¡ç®— f[i][fuel] çš„æ—¶å€™ä¾èµ–äº f[k][fuel-need]
    // å…¶ä¸­ i å’Œ k å¹¶æ— ä¸¥æ ¼çš„å¤§å°å…³ç³»
    // è€Œ fuel å’Œ fuel-need å…·æœ‰ä¸¥æ ¼å¤§å°å…³ç³»ï¼šfuel >= fuel-need
    // å› æ­¤éœ€è¦å…ˆä»å°åˆ°å¤§æšä¸¾æ²¹é‡
    for (int cur = 0; cur <= fuel; cur++) {
        for (int i = 0; i < n; i++) {
            for (int k = 0; k < n; k++) {
                if (i != k) {
                    int need = abs(locations[i] - locations[k]);
                    if (cur >= need) {
                        dp[i][cur] += dp[k][cur-need];
                        dp[i][cur] %= mod;
                    }
                }
            }
        }
    }
    return dp[start][fuel];
}
```


##### [ğŸ“ŒLC576. å‡ºç•Œçš„è·¯å¾„æ•°](/workspace/576.%E5%87%BA%E7%95%8C%E7%9A%84%E8%B7%AF%E5%BE%84%E6%95%B0.cpp)
> é¢˜ç›®æè¿°: https://leetcode.cn/problems/out-of-boundary-paths
> 
> ![LC576](/appendix/LC576.png)

```CPP
// å°†(x,y)å¹³é“ºæˆä¸€ç»´, ä½¿ç”¨getIndex()å’ŒparseIndex()è½¬æ¢
int getIndex(int x, int y, int n){
    return x*n + y;
}
vector<int> parseIndex(int index, int n){
    return {index/n, index%n};
}
int findPaths(int m, int n, int maxMove, int startRow, int startColumn) {
    // dp[index][move]: ä»index=(x*n+y)å‡ºå‘, æœ€å¤šmoveæ­¥èƒ½å¤Ÿåˆ°è¾¾è¾¹ç¼˜çš„è·¯å¾„æ•°
    vector<vector<int> > dp(m*n, vector<int>(maxMove+1, 0));
    int directions[4][2] = {{0,1},{1,0},{0,-1},{-1,0}};

    // åˆå§‹åŒ–
    // - æ³¨æ„è¿™é‡Œæ˜¯å¯¹æ‰€æœ‰ä¸´ç•Œposçš„dpå€¼"+1",è€Œä¸æ˜¯"=1" (ä»è€Œä¸ç”¨å•ç‹¬è§£å†³å››ä¸ªé¡¶ç‚¹)
    // - å¹¶ä¸”ç¬¬äºŒç»´moveæ˜¯"æœ€å¤šmoveæ­¥", æ‰€ä»¥æ¯ä¸ªé0 moveå€¼éƒ½è¦åˆå§‹åŒ–
    for(int move=1; move<=maxMove; move++){
        for(int x=0; x<m; x++){
            dp[getIndex(x, 0, n)][move] += 1;
            dp[getIndex(x, n-1, n)][move] += 1;
        }
        for(int y=0; y<n; y++){
            dp[getIndex(0, y, n)][move] += 1;
            dp[getIndex(m-1, y, n)][move] += 1;
        }
    }
    // çŠ¶æ€è½¬ç§»
    for(int move=1; move<=maxMove; move++){
        // çŠ¶æ€è½¬ç§»ç¬¬äºŒç»´åªä½¿ç”¨ä¸Šä¸€è½®çš„[move-1], æ‰€ä»¥idxé¡ºåº(æˆ–è€…å±•å¼€æˆ(x,y))ä¸é‡è¦
        for(int idx=0; idx<m*n; idx++){
            int x = parseIndex(idx, n)[0];
            int y = parseIndex(idx, n)[1];
            for(int d=0; d<4; d++){
                int nextX = x+directions[d][0];
                int nextY = y+directions[d][1];
                // è¿™é‡Œä¸è¦æŠŠè¾¹ç•Œçº¿ä¸Šçš„ä½ç½®æ’é™¤æ‰, å› ä¸ºå¯ä»¥é‡å¤è®¿é—®, åªæ˜¯é™åˆ¶äº†æ­¥æ•°maxMove
                if(nextX>=0 && nextX<m && nextY>=0 && nextY<n){
                    dp[idx][move] += dp[getIndex(nextX, nextY, n)][move-1];
                    dp[idx][move] %= 1000000007;
                }
            }
        }
    }
    return dp[getIndex(startRow, startColumn, n)][maxMove];
}
```


##### [LC1301. æœ€å¤§å¾—åˆ†çš„è·¯å¾„æ•°ç›®](/workspace/1301.%E6%9C%80%E5%A4%A7%E5%BE%97%E5%88%86%E7%9A%84%E8%B7%AF%E5%BE%84%E6%95%B0%E7%9B%AE.cpp)
> é¢˜ç›®æè¿°: https://leetcode.cn/problems/number-of-paths-with-max-score/
> 
> è¿˜å¯ä»¥è¿›ä¸€æ­¥åƒ[LC576]ä¸€æ ·å°†åæ ‡å‹ç¼©ä¸º`ä¸€ç»´index`, ä½†`N<=100`çš„é™åˆ¶æ²¡å¿…è¦èŠ‚çº¦ç©ºé—´
> 
> ç”¨ä¸€ä¸ª`dp[i][j]`å’Œä¸€ä¸ª`methods[i][j]`åˆ†åˆ«è®°å½•æœ€å¤§å€¼å’Œè·å¾—æœ€å¤§å€¼çš„æ–¹æ³•æ•°
> 
> å¹¶ä¸”`èµ·ç‚¹E`å’Œ`ç»ˆç‚¹S`è¦æ³¨æ„å¤„ç†, å¥½éº»çƒ¦...ç›´æ¥å¼„æˆ`'0'`ä¼šä¸ä¼šæ–¹ä¾¿ç‚¹
> 
> â—ï¸ åˆ«å¿˜è®°`mod 1000000007`

```CPP
vector<int> pathsWithMaxScore(vector<string>& board) {
    int m = board.size();
    int n = board[0].size();
    vector<vector<int> > dp(m, vector<int>(n, 0));  // æœ€å¤§è·¯å¾„å’Œ
    vector<vector<int> > methods(m, vector<int>(n, 0)); // æœ€å¤§å€¼çš„è·¯å¾„æ•°ç›®
    dp[0][0] = 0;
    methods[0][0] = 1;
    for(int i=1; i<m; i++){
        if(board[i][0] == 'X')
            break;
        dp[i][0] = dp[i-1][0] + (board[i][0]-'0');
        methods[i][0] = 1;
    }
    for(int j=1; j<n; j++){
        if(board[0][j] == 'X')
            break;
        dp[0][j] = dp[0][j-1] + (board[0][j]-'0');
        methods[0][j] = 1;
    }
    for(int i=1; i<m; i++){
        for(int j=1; j<n; j++){
            if(board[i][j] == 'X')
                continue;
            dp[i][j] = max(dp[i-1][j], max(dp[i][j-1], dp[i-1][j-1]));
            // ä¸‰ä¸ªæ–¹å‘éƒ½ä¸è¡Œ
            if(dp[i][j]==0 && board[i][j]!='S')
                continue;
            if(dp[i-1][j-1]==dp[i][j])
                methods[i][j] += methods[i-1][j-1];
            if(dp[i-1][j]==dp[i][j])
                methods[i][j] += methods[i-1][j];
            if(dp[i][j-1]==dp[i][j])
                methods[i][j] += methods[i][j-1];
            // è·³è¿‡end='S'çš„æœ€å¤§å€¼è®¡ç®—
            if(i==m-1 && j==n-1)
                continue;
            dp[i][j] += (board[i][j]-'0');
            dp[i][j] %= 1000000007;
            methods[i][j] %= 1000000007;
        }
    }
    return {dp[m-1][n-1]%1000000007, methods[m-1][n-1]%1000000007};
}
```